<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Salesforce Metadata Exporter</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div class="container">
    <div class="header">
      <img src="icons/icon48.png" alt="Logo" class="logo">
      <h1>Salesforce Metadata Exporter</h1>
    </div>

    <div id="notSalesforce" class="message warning" style="display: none;">
      <p>Please navigate to a Salesforce page to use this extension.</p>
    </div>

    <div id="mainContent" style="display: none;">
      <div class="section">
        <h2>Export Options</h2>

        <div class="option-group">
          <label class="checkbox-label">
            <input type="checkbox" id="includeStandard" checked>
            <span>Include Standard Objects</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="includeCustom" checked>
            <span>Include Custom Objects</span>
          </label>
        </div>

        <div class="option-group">
          <label class="radio-label">
            <input type="radio" name="apiType" value="standard" checked>
            <span>Standard API</span>
          </label>
          <label class="radio-label">
            <input type="radio" name="apiType" value="tooling">
            <span>Tooling API</span>
          </label>
        </div>
      </div>

      <div class="section">
        <h2>System Object Filter (Optional)</h2>
        <div style="padding: 8px; background-color: #f9f9f9; border-radius: 3px;">
          <label class="checkbox-label" style="font-size: 11px;">
            <input type="checkbox" id="filterSystemObjects" checked>
            <span>Exclude system objects (Share, Feed, History, etc.)</span>
          </label>

          <div id="systemObjectDetails" style="margin-top: 6px; padding-left: 20px; font-size: 10px; color: #666; display: none;">
            <label class="checkbox-label">
              <input type="checkbox" id="filterShareObjects" checked>
              <span>Share objects (AccountShare, etc.)</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="filterFeedObjects" checked>
              <span>Feed objects (AccountFeed, etc.)</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="filterHistoryObjects" checked>
              <span>History objects (AccountHistory, etc.)</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="filterChangeEvents" checked>
              <span>Change Events (CDC)</span>
            </label>
            <label class="checkbox-label">
              <input type="checkbox" id="filterPlatformEvents" checked>
              <span>Platform Events (__e)</span>
            </label>
          </div>
          <a href="#" id="toggleSystemDetails" style="font-size: 10px; margin-top: 4px; display: inline-block;">
            Show advanced options
          </a>
        </div>
      </div>

      <div class="section">
        <h2>User Permission Filter (Optional)</h2>
        <div class="option-group">
          <label class="checkbox-label">
            <input type="checkbox" id="filterByUser">
            <span>Filter by User Permissions</span>
          </label>
        </div>
        <div id="userFilterOptions" style="display: none; margin-top: 8px;">
          <label for="username" style="display: block; margin-bottom: 4px; font-size: 12px;">
            Username:
          </label>
          <input type="text" id="username" placeholder="user@example.com"
                 style="width: 100%; padding: 6px; border: 1px solid #ddd; border-radius: 3px; font-size: 13px; margin-bottom: 8px;">

          <p style="font-size: 11px; color: #666; margin-top: 8px; margin-bottom: 0;">
            Only export objects and fields this user can access
          </p>
        </div>
      </div>

      <div class="section">
        <h2>Field Details</h2>
        <div class="option-group">
          <label class="checkbox-label">
            <input type="checkbox" id="includeAttributes" checked>
            <span>Field Attributes (Required, Unique, etc.)</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="includeRelationships" checked>
            <span>Relationship Information</span>
          </label>
          <label class="checkbox-label">
            <input type="checkbox" id="includePicklist">
            <span>Picklist Values</span>
          </label>
        </div>
      </div>

      <button id="exportBtn" class="btn-primary">
        Export All Metadata
      </button>

      <div id="status" class="status" style="display: none;">
        <div class="status-text" id="statusText"></div>
        <div class="progress-bar" id="progressBar" style="display: none;">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="stats" id="stats" style="display: none;">
          <span id="statsText"></span>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>Version 1.3.0</p>
    </div>
  </div>

  <script src="popup.js"></script>
</body>
</html>
